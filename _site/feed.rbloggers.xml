<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>njtierney - rbloggers</title>
		<description>Posts categorized as 'rbloggers'</description>
		<link>http://tierneyn.github.io</link>
		<atom:link href="http://tierneyn.github.io/feed.rbloggers.xml" rel="self" type="application/rss+xml" />
		
			<item>
				<title>ggplot your missing data</title>
					<description>&lt;p&gt;Visualising missing data is important when analysing a dataset. I wanted to make a plot of the presence/absence in a dataset. One package, &lt;a href=&quot;https://cran.r-project.org/web/packages/Amelia/index.html&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Amelia&lt;/code&gt;&lt;/a&gt; provides a function to do this, but I don’t like the way it looks. So I made a ggplot version of what it did.&lt;/p&gt;

&lt;p&gt;Let’s make a dataset using the awesome &lt;a href=&quot;https://github.com/trinker/wakefield&quot;&gt;wakefield package&lt;/a&gt;, and add random missingness.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;r
library(dplyr)
library(wakefield)
df &amp;lt;- 
  r_data_frame(
  n = 30,
  id,
  race,
  age,
  sex,
  hour,
  iq,
  height,
  died,
  Scoring = rnorm,
  Smoker = valid
  ) %&amp;gt;%
  r_na(prob=.4)
&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;This is what the Amelia package produces by default:&lt;/p&gt;

&lt;p&gt;```r
library(Amelia)&lt;/p&gt;

&lt;p&gt;missmap(df)
```&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/figure/source/2015-11-12-ggplot-missing-data/unnamed-chunk-2-1.png&quot; alt=&quot;plot of chunk unnamed-chunk-2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And let’s explore the missing data using my own ggplot function:&lt;/p&gt;

&lt;p&gt;```r
# A function that plots missingness
# requires &lt;code class=&quot;highlighter-rouge&quot;&gt;reshape2&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;library(reshape2)
library(ggplot2)&lt;/p&gt;

&lt;p&gt;ggplot_missing &amp;lt;- function(x){&lt;/p&gt;

&lt;p&gt;x %&amp;gt;% 
    is.na %&amp;gt;%
    melt %&amp;gt;%
    ggplot(data = .,
           aes(x = Var2,
               y = Var1)) +
    geom_raster(aes(fill = value)) +
    scale_fill_grey(name = “”,
                    labels = c(“Present”,”Missing”)) +
    theme_minimal() + 
    theme(axis.text.x  = element_text(angle=45, vjust=0.5)) + 
    labs(x = “Variables in Dataset”,
         y = “Rows / observations”)
}
```&lt;/p&gt;

&lt;p&gt;Let’s test it out&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;r
ggplot_missing(df)
&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/figure/source/2015-11-12-ggplot-missing-data/unnamed-chunk-4-1.png&quot; alt=&quot;plot of chunk unnamed-chunk-4&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It’s much cleaner, and easier to interpret.&lt;/p&gt;

&lt;p&gt;This function, and others, is available in the &lt;a href=&quot;https://github.com/tierneyn/neato&quot;&gt;neato package&lt;/a&gt;, where I store a bunch of functions I think are neat.&lt;/p&gt;

&lt;p&gt;Quick note - there used to be a function, &lt;code class=&quot;highlighter-rouge&quot;&gt;missing.pattern.plot&lt;/code&gt; &lt;a href=&quot;http://www.inside-r.org/packages/cran/mi/docs/missing.pattern.plot&quot;&gt;that you can see here&lt;/a&gt; in the package &lt;code class=&quot;highlighter-rouge&quot;&gt;mi&lt;/code&gt;. However, it doesn’t appear to exist anymore. This is a shame, as it was a really nifty plot that clustered the groups of missingness. My friend and colleague, &lt;a href=&quot;http://samclifford.info/&quot;&gt;Sam Clifford&lt;/a&gt; heard me complaining about this and wrote some code that does just that - I shall share this soon, it will likely be added to the &lt;a href=&quot;https://github.com/tierneyn/neato&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;neato&lt;/code&gt; repository&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Thoughts? Write them below.&lt;/p&gt;
</description>
				<pubDate>Tue, 01 Dec 2015 00:00:00 +1100</pubDate>
				<link>http://tierneyn.github.io/r/missing%20data/rbloggers/2015/12/01/ggplot-missing-data/</link>
				<guid isPermaLink="true">http://tierneyn.github.io/r/missing%20data/rbloggers/2015/12/01/ggplot-missing-data/</guid>
			</item>
		
	</channel>
</rss>